{"version":3,"sources":["assets/icon.svg","components/List.js","components/App.js","index.js"],"names":["module","exports","List","props","newData","setNewData","useState","draggedItem","setDraggedItem","dropped","setDropped","reorder","setReorder","offsetTop","setOffsetTop","margin","setMargin","relativeOffset","setRelativeOffset","orderedData","draggedItemStyle","position","opacity","animation","top","transition","hoveredItemStyle","handleDragOver","e","touchedTarget","touches","x","clientX","y","clientY","target","document","elementFromPoint","body","style","touchAction","dataset","undefined","getTouchedTarget","key","parseInt","isNaN","itemOffset","getBoundingClientRect","handleDrop","forEach","el","i","order","push","sort","a","b","handleMouseDown","item","yOffset","window","scrollY","useEffect","addEventListener","removeEventListener","handleMouseMove","className","onMouseUp","onTouchEnd","map","Fragment","onMouseOver","onTouchMove","src","Icon","alt","title","data-key","onMouseDown","bind","onTouchStart","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.fb377e96.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon.945099a8.svg\";","import React, { useState, useEffect } from 'react';\r\nimport '../styles/List.scss';\r\nimport Icon from '../assets/icon.svg';\r\n\r\nfunction List(props) {\r\n    const { newData, setNewData } = props\r\n    const [draggedItem, setDraggedItem] = useState(null);\r\n    const [dropped, setDropped] = useState(null);\r\n    const [reorder, setReorder] = useState([null, null]);\r\n    const [offsetTop, setOffsetTop] = useState(null);\r\n    const [margin, setMargin] = useState(\"1px 0 1px 0\");\r\n    const [relativeOffset, setRelativeOffset] = useState(null);\r\n\r\n    let orderedData = [];\r\n    let draggedItemStyle = {\r\n        position: \"absolute\",\r\n        opacity: \".95\",\r\n        animation: \"slideLeft 300ms forwards\",\r\n        top: offsetTop - relativeOffset + \"px\",\r\n        transition: \"0ms\"\r\n    }\r\n\r\n    let hoveredItemStyle = {\r\n        margin\r\n    }\r\n\r\n    const reorderList = (dragged, draggedOn) => {\r\n        setReorder([dragged, draggedOn]);\r\n    }\r\n\r\n    const handleDragOver = (e) => {\r\n        const touchedTarget = e.touches ? getTouchedTarget(e) : undefined;\r\n        const key = parseInt(e.touches ? touchedTarget.dataset.key : e.target.dataset.key);\r\n\r\n        if (typeof draggedItem === 'number' && !isNaN(key)) {\r\n            draggedItem !== key && reorderList(draggedItem, key);\r\n            const itemOffset = e.touches ? (touchedTarget.dataset.key ? touchedTarget.getBoundingClientRect().top : 0) : e.target.getBoundingClientRect().top;\r\n            setMargin((itemOffset <= offsetTop) ? \"34px 0 1px 0\" : \"1px 0 34px 0\");\r\n        }\r\n    }\r\n\r\n    function getTouchedTarget(e) {\r\n        const x = e.touches[0].clientX;\r\n        const y = e.touches[0].clientY;\r\n        const target = document.elementFromPoint(x, y);\r\n\r\n        document.body.style.touchAction = \"none\"; // disable screen scrolling when dragging item on mobile\r\n\r\n        return target.dataset ? target : undefined;\r\n    }\r\n\r\n    const handleDrop = () => {\r\n\r\n        newData.forEach((el, i) => {\r\n            if (i >= reorder[1] && i !== reorder[0]) {\r\n                el.order = i + 1;\r\n            }\r\n            if (i === reorder[0]) {\r\n                el.order = reorder[0] > reorder[1] ? reorder[1] : reorder[1] + 2;\r\n            }\r\n            orderedData.push(el);\r\n        });\r\n\r\n        setReorder([null, null]);\r\n        setDraggedItem(null);\r\n        setDropped(reorder[1]);\r\n\r\n        orderedData.sort((a, b) => a.order - b.order).forEach((el, i) => { el.order = i }); // sort by order, and recalculate new order values\r\n        setNewData(orderedData);\r\n    }\r\n\r\n    const handleMouseDown = (item, e) => {\r\n        const yOffset = e.touches ? e.touches[0].clientY : e.clientY;\r\n        setRelativeOffset(yOffset - e.target.getBoundingClientRect().top - window.scrollY);\r\n        setDraggedItem(item);\r\n        setOffsetTop(yOffset - 2); // -2 because of item border 1px\r\n        setDropped(null);\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"mouseup\", () => {\r\n            setDraggedItem(null);\r\n            setMargin(\"1px 0 1px 0\");\r\n        });\r\n        window.addEventListener(\"touchend\", () => {\r\n            setDraggedItem(null);\r\n            setMargin(\"1px 0 1px 0\");\r\n        });\r\n        return () => {\r\n            window.removeEventListener(\"mouseup\", () => setDraggedItem(null));\r\n            window.removeEventListener(\"touchend\", () => setDraggedItem(null));\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        const handleMouseMove = e => {\r\n            setOffsetTop((e.touches ? e.touches[0].clientY : e.clientY));\r\n        };\r\n\r\n        window.addEventListener(\"mousemove\", handleMouseMove);\r\n        window.addEventListener(\"touchmove\", handleMouseMove);\r\n        return () => {\r\n            window.removeEventListener(\"mousemove\", handleMouseMove);\r\n            window.removeEventListener(\"touchmove\", handleMouseMove);\r\n        }\r\n    });\r\n\r\n    return (\r\n        <ul className=\"list\"\r\n            onMouseUp={handleDrop}\r\n            onTouchEnd={handleDrop}>\r\n            {newData.map((el, i) => {\r\n                return (\r\n                    <React.Fragment key={i}>\r\n                        <li\r\n                            className={`list__item ${dropped === i ? 'slideRight' : ''} `}\r\n                            style={draggedItem === i ?\r\n                                draggedItemStyle : (draggedItem !== null && reorder[1] === i) ?\r\n                                    hoveredItemStyle : undefined}\r\n                            onMouseOver={handleDragOver}\r\n                            onTouchMove={handleDragOver}\r\n\r\n                        >\r\n                            <img className=\"list__item-icon\" src={Icon} alt=\"icon\" />\r\n                            <div className=\"list__item-title\">\r\n                                <h1>{el.title}</h1>\r\n                                <span>order: {el.order}</span>\r\n                            </div>\r\n                            <div\r\n                                data-key={i}\r\n                                className=\"list__item-grab\"\r\n                                onMouseDown={handleMouseDown.bind(this, i)}\r\n                                onTouchStart={handleMouseDown.bind(this, i)}\r\n                            >\r\n                            </div>\r\n                        </li>\r\n                        {((draggedItem === i && reorder[0] === null)) ? <li className=\"list__item dummy\"></li> : undefined}\r\n                    </React.Fragment>\r\n                )\r\n            })}\r\n        </ul >\r\n    )\r\n}\r\nexport default List;","import React, { useState } from 'react';\r\nimport List from './List';\r\nimport '../styles/App.scss';\r\n\r\nfunction App() {\r\n\r\n  const sampleData = [\r\n    {\r\n      title: \"Item One\",\r\n      order: 0\r\n    },\r\n    {\r\n      title: \"Item Two\",\r\n      order: 1\r\n    },\r\n    {\r\n      title: \"Item Three\",\r\n      order: 2\r\n    },\r\n    {\r\n      title: \"Item Four\",\r\n      order: 3\r\n    },\r\n    {\r\n      title: \"Item Five\",\r\n      order: 4\r\n    },\r\n    {\r\n      title: \"Item Six\",\r\n      order: 5\r\n    },\r\n    {\r\n      title: \"Item Seven\",\r\n      order: 6\r\n    },\r\n    {\r\n      title: \"Item Eight\",\r\n      order: 7\r\n    },\r\n    {\r\n      title: \"Item Nine\",\r\n      order: 8\r\n    },\r\n    {\r\n      title: \"Item Ten\",\r\n      order: 9\r\n    },\r\n  ]\r\n\r\n  const [newData, setNewData] = useState([...sampleData]);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <List newData={newData} setNewData={setNewData} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App';\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}